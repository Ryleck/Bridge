/**
 * Created by Phil on 2016-02-11.
 */
var tableau = require('../tableau/tableau');
var gestion = require('../gestionPartie/gestionPartie');

module.exports = {
    toArray: function(jsonVar){
        conversionJason(jsonVar);
    }
};

function conversionJason(jV){
    var t = [];
    var s = [];
    var l1 = [];
    var l2 = [];
    var l = [];


    s.push(jV.partie.stats[0].nbEquipes[0]);
    s.push(jV.partie.stats[0].nbPlanchettes[0]);
    s.push(jV.partie.stats[0].nbRondes[0]);
    s.push(jV.partie.stats[0].score[0]);
    s.push(jV.partie.stats[0].phantome[0]);
    s.push(jV.partie.stats[0].fini[0]);
    tableau.ecrirePartie(s);

    /*gestion.setPartie(parseInt(jV.partie.stats[0].nbEquipes[0]),
        parseInt(jV.partie.stats[0].nbPlanchettes[0]),
        parseInt(jV.partie.stats[0].nbRondes[0]),
        jV.partie.stats[0].score[0],
        parseInt(jV.partie.stats[0].phantome[0]),
        parseInt(jV.partie.stats[0].fini[0]));*/

    l1 = jV.partie.feuille[0].noms[0].nom1[0].nom;
    l2 = jV.partie.feuille[0].noms[0].nom2[0].nom;
    l1.shift();
    l2.shift();
    //gestion.setNoms(l1,l2)

    t.push(jV.partie.feuille[0].equipes[0].equipe);




    for (j = 0; j < jV.partie.feuille[0].jeux[0].jeu.length; j++) {
        l.push(jV.partie.feuille[0].jeux[0].jeu[j].planchette[0]);
        for (i = 0; i < jV.partie.feuille[0].jeux[0].jeu[j].score.length; i++) {
            l.push(parseFloat(jV.partie.feuille[0].jeux[0].jeu[j].score[i]) || 0);
        }
        t.push(l);
        l = [];
    }
    //console.log(gestion.getPartie());
    tableau.ecrireTableau(t);
    console.log(jV.partie.feuille);
    //console.log(tableau.retournePartie());
}